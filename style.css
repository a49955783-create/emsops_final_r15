:root{
  --bg:#0f172a;          /* خلفية داكنة */
  --card:#0b1223;
  --muted:#a3a7b4;
  --text:#e5e7eb;
  --accent:#7c3aed;      /* بنفسجي */
  --accent2:#8b5cf6;
  --ok:#22c55e;         /* أخضر */
  --danger:#b91c1c;     /* أحمر */
  --line:#1f2937;
  --chip:#111827;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:"Cairo",system-ui,-apple-system,Segoe UI,Tahoma,Arial;}
#intro{position:fixed;inset:0;z-index:9999;background:linear-gradient(180deg,#2c1b2f,#4b2334);display:flex;align-items:center;justify-content:center;flex-direction:column;animation:fadeOut 0.8s ease 2.2s forwards;}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}
.beacons{display:flex;gap:10px;margin-bottom:10px}
.beacon{width:12px;height:12px;border-radius:50%;}
.beacon.blue{background:#3b82f6;box-shadow:0 0 16px 4px rgba(59,130,246,.7);animation:pulseB 1.1s infinite}
.beacon.red{background:#ef4444;box-shadow:0 0 16px 4px rgba(239,68,68,.7);animation:pulseR 1.1s infinite .15s}
@keyframes pulseB{50%{box-shadow:0 0 28px 10px rgba(59,130,246,.9)}}
@keyframes pulseR{50%{box-shadow:0 0 28px 10px rgba(239,68,68,.9)}}
.intro-logo img{width:70px;height:70px;object-fit:contain;filter:drop-shadow(0 6px 14px rgba(0,0,0,.5))}
.intro-title{margin-top:14px;font-size:28px;font-weight:800;letter-spacing:1px;text-shadow:0 2px 10px #000}
#copyToast{position:fixed;top:14px;left:50%;transform:translateX(-50%);background:var(--ok);color:#03160a;font-weight:800;padding:10px 16px;border-radius:12px;z-index:9990;opacity:0;pointer-events:none;transition:.25s;}
.topbar{position:sticky;top:0;z-index:50;background:rgba(2,8,23,.8);backdrop-filter:blur(6px);display:grid;grid-template-columns:84px 1fr 84px;align-items:center;padding:8px 12px;border-bottom:1px solid #1c2540;}
.topbar h1{margin:0;text-align:center;font-size:24px}
.badge{width:56px;height:56px;object-fit:contain;opacity:.9}
.sticky-actions{position:sticky;top:64px;z-index:40;background:rgba(2,8,23,.85);backdrop-filter:blur(4px);border-bottom:1px solid #1c2540;}
.sticky-actions .actions{display:flex;gap:10px;align-items:center;padding:10px 12px;}
.mode{padding:0 12px 12px;color:var(--muted);display:flex;gap:14px}
.mode input{accent-color:var(--accent)}
.container{max-width:1200px;margin:24px auto;padding:0 14px}
.card{border:1px solid var(--line);border-radius:14px;background:linear-gradient(180deg,#0b1223,#0a1221);padding:14px;margin-bottom:16px;box-shadow:0 1px 0 #0a1020 inset,0 8px 24px rgba(0,0,0,.25);}
.card-head{display:flex;align-items:center;gap:10px;justify-content:space-between;margin-bottom:10px}
.title{font-weight:800}
.small{font-size:12px;color:var(--muted)}
.btn{border:1px solid #2b2f45;background:#11182b;color:#fff;padding:10px 14px;border-radius:12px;font-weight:800;cursor:pointer;}
.btn:hover{filter:brightness(1.07)}
.btn.slim{padding:6px 10px;border-radius:10px}
.btn.violet{background:linear-gradient(180deg,var(--accent),var(--accent2));border-color:transparent}
.btn.danger{background:#882525;border-color:#7a1b1b}
.btn.icon{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.input,.select,.result{width:100%;border:1px solid #1e253d;outline:none;background:#0b1120;color:var(--text);padding:10px 12px;border-radius:12px;}
.select{appearance:none}
.result{resize:vertical;min-height:180px}
.label{margin:12px 0 6px;color:var(--muted)}
.err{color:#ff6767;font-size:12px;margin-top:6px;display:none}
.drop{border:2px dashed #334155;color:#94a3b8;text-align:center;padding:18px;border-radius:14px;transition:.2s}
.drop.dragging{background:#0b1326}
.row.two{display:grid;gap:16px;grid-template-columns:1fr 1fr}
#rows{display:flex;flex-direction:column;gap:10px}
.row-item{display:grid;grid-template-columns:110px 120px 140px 160px 1fr 68px;gap:10px;align-items:center;background:var(--chip);border:1px solid #1f2740;border-radius:12px;padding:10px;}
.row-item .state-badge{font-weight:800;padding:6px 10px;border-radius:10px;display:inline-block;text-align:center}
.state-midan{background:#0b2a1a;color:#b5ffca}
.state-busy{background:#2a1430;color:#f1b2ff}
.state-train{background:#1e2a4a;color:#b9d6ff}
.state-test{background:#401e1e;color:#ffc3c3}
.state-off{background:#3a1a1a;color:#ffb0b0}
.row-item .btn.del{background:#7d2020;border-color:#6e1717}
.chip{background:#0b1223;padding:6px 10px;border-radius:10px;border:1px solid #1f2740;color:#9fb0cc;}
#drawerBackdrop{position:fixed;inset:0;background:rgba(2,6,23,.55);z-index:60;opacity:0;visibility:hidden;transition:.2s;}
#drawer{position:fixed;inset:auto 0 0 0;transform:translateY(110%);background:linear-gradient(180deg,#0c1426,#0a1221);border-top-left-radius:18px;border-top-right-radius:18px;box-shadow:0 -8px 40px rgba(0,0,0,.4);padding:14px;z-index:70;transition:.28s;max-height:80vh;overflow:auto;}
#drawer.open{transform:none}
#drawerBackdrop.show{opacity:1;visibility:visible}
.drawer-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.drawer-title{font-weight:800}
.drawer-label{display:block;margin:10px 0 6px;color:var(--muted)}
.drawer-foot{margin-top:12px}
.block{width:100%}
@media (max-width:900px){.row.two{grid-template-columns:1fr}.row-item{grid-template-columns:100px 110px 1fr 1fr 1fr 60px}}
